# plot_map_area_points.py
import json
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D  # noqa: F401

# ==== paste your two log payloads here (just the JSON object) ====
s1 = r'''{"type":"map_area","mission_id":"Mission_6393","points":[{"x":1.1221938133239747,"y":-10.962727546691895,"z":2.7507143020629885},{"x":0.975363552570343,"y":-10.035676002502442,"z":2.7507143020629885},{"x":0.5492451786994934,"y":-9.199372291564942,"z":2.7507143020629885},{"x":-0.11445008218288422,"y":-8.535676956176758,"z":2.7507143020629885},{"x":-0.9507551193237305,"y":-8.109559059143067,"z":2.7507143020629885},{"x":-1.8778057098388672,"y":-7.962728023529053,"z":2.7507143020629885},{"x":-2.804856061935425,"y":-8.109559059143067,"z":2.7507143020629885},{"x":-3.6411612033843996,"y":-8.535676956176758,"z":2.7507143020629885},{"x":-4.304858207702637,"y":-9.199373245239258,"z":2.7507143020629885},{"x":-4.730976581573486,"y":-10.035676002502442,"z":2.7507143020629885},{"x":-4.877807140350342,"y":-10.962727546691895,"z":2.7507143020629885},{"x":-4.730976104736328,"y":-11.88978099822998,"z":2.7507143020629885},{"x":-4.3048577308654789,"y":-12.726086616516114,"z":2.7507143020629885},{"x":-3.641160249710083,"y":-13.389782905578614,"z":2.7507143020629885},{"x":-2.8048551082611086,"y":-13.815899848937989,"z":2.7507143020629885},{"x":-1.877805471420288,"y":-13.962729454040528,"z":2.7507143020629885},{"x":-0.9507546424865723,"y":-13.815899848937989,"z":2.7507143020629885},{"x":-0.11444936692714691,"y":-13.38978099822998,"z":2.7507143020629885},{"x":0.5492449402809143,"y":-12.726086616516114,"z":2.7507143020629885},{"x":0.975363552570343,"y":-11.889779090881348,"z":2.7507143020629885},{"x":1.1221938133239747,"y":-10.962727546691895,"z":12.750711441040039},{"x":0.975363552570343,"y":-10.035676002502442,"z":12.750711441040039},{"x":0.5492451786994934,"y":-9.199372291564942,"z":12.750711441040039},{"x":-0.11445008218288422,"y":-8.535676956176758,"z":12.750711441040039},{"x":-0.9507551193237305,"y":-8.109559059143067,"z":12.750711441040039},{"x":-1.8778057098388672,"y":-7.962728023529053,"z":12.750711441040039},{"x":-2.804856061935425,"y":-8.109559059143067,"z":12.750711441040039},{"x":-3.6411612033843996,"y":-8.535676956176758,"z":12.750711441040039},{"x":-4.304858207702637,"y":-9.199373245239258,"z":12.750711441040039},{"x":-4.730976581573486,"y":-10.035676002502442,"z":12.750711441040039},{"x":-4.877807140350342,"y":-10.962727546691895,"z":12.750711441040039},{"x":-4.730976104736328,"y":-11.88978099822998,"z":12.750711441040039},{"x":-4.3048577308654789,"y":-12.726086616516114,"z":12.750711441040039},{"x":-3.641160249710083,"y":-13.389782905578614,"z":12.750711441040039},{"x":-2.8048551082611086,"y":-13.815899848937989,"z":12.750711441040039},{"x":-1.877805471420288,"y":-13.962729454040528,"z":12.750711441040039},{"x":-0.9507546424865723,"y":-13.815899848937989,"z":12.750711441040039},{"x":-0.11444936692714691,"y":-13.38978099822998,"z":12.750711441040039},{"x":0.5492449402809143,"y":-12.726086616516114,"z":12.750711441040039},{"x":0.975363552570343,"y":-11.889779090881348,"z":12.750711441040039}],"grid_spacing":1.0141853094100953,"vertical_step":3.3333323001861574,"priority":1,"preempt":false}'''

s2 = r'''{"type":"map_area","mission_id":"Mission_6393","points":[{"x":1.1221938133239747,"y":-10.962727546691895,"z":2.7507143020629885},{"x":0.975363552570343,"y":-10.035676002502442,"z":2.7507143020629885},{"x":0.5492451786994934,"y":-9.199372291564942,"z":2.7507143020629885},{"x":-0.11445008218288422,"y":-8.535676956176758,"z":2.7507143020629885},{"x":-0.9507551193237305,"y":-8.109559059143067,"z":2.7507143020629885},{"x":-1.8778057098388672,"y":-7.962728023529053,"z":2.7507143020629885},{"x":-2.804856061935425,"y":-8.109559059143067,"z":2.7507143020629885},{"x":-3.6411612033843996,"y":-8.535676956176758,"z":2.7507143020629885},{"x":-4.304858207702637,"y":-9.199373245239258,"z":2.7507143020629885},{"x":-4.730976581573486,"y":-10.035676002502442,"z":2.7507143020629885},{"x":-4.877807140350342,"y":-10.962727546691895,"z":2.7507143020629885},{"x":-4.730976104736328,"y":-11.88978099822998,"z":2.7507143020629885},{"x":-4.3048577308654789,"y":-12.726086616516114,"z":2.7507143020629885},{"x":-3.641160249710083,"y":-13.389782905578614,"z":2.7507143020629885},{"x":-2.8048551082611086,"y":-13.815899848937989,"z":2.7507143020629885},{"x":-1.877805471420288,"y":-13.962729454040528,"z":2.7507143020629885},{"x":-0.9507546424865723,"y":-13.815899848937989,"z":2.7507143020629885},{"x":-0.11444936692714691,"y":-13.38978099822998,"z":2.7507143020629885},{"x":0.5492449402809143,"y":-12.726086616516114,"z":2.7507143020629885},{"x":0.975363552570343,"y":-11.889779090881348,"z":2.7507143020629885},{"x":1.1221938133239747,"y":-10.962727546691895,"z":12.750711441040039},{"x":0.975363552570343,"y":-10.035676002502442,"z":12.750711441040039},{"x":0.5492451786994934,"y":-9.199372291564942,"z":12.750711441040039},{"x":-0.11445008218288422,"y":-8.535676956176758,"z":12.750711441040039},{"x":-0.9507551193237305,"y":-8.109559059143067,"z":12.750711441040039},{"x":-1.8778057098388672,"y":-7.962728023529053,"z":12.750711441040039},{"x":-2.804856061935425,"y":-8.109559059143067,"z":12.750711441040039},{"x":-3.6411612033843996,"y":-8.535676956176758,"z":12.750711441040039},{"x":-4.304858207702637,"y":-9.199373245239258,"z":12.750711441040039},{"x":-4.730976581573486,"y":-10.035676002502442,"z":12.750711441040039},{"x":-4.877807140350342,"y":-10.962727546691895,"z":12.750711441040039},{"x":-4.730976104736328,"y":-11.88978099822998,"z":12.750711441040039},{"x":-4.3048577308654789,"y":-12.726086616516114,"z":12.750711441040039},{"x":-3.641160249710083,"y":-13.389782905578614,"z":12.750711441040039},{"x":-2.8048551082611086,"y":-13.815899848937989,"z":12.750711441040039},{"x":-1.877805471420288,"y":-13.962729454040528,"z":12.750711441040039},{"x":-0.9507546424865723,"y":-13.815899848937989,"z":12.750711441040039},{"x":-0.11444936692714691,"y":-13.38978099822998,"z":12.750711441040039},{"x":0.5492449402809143,"y":-12.726086616516114,"z":12.750711441040039},{"x":0.975363552570343,"y":-11.889779090881348,"z":12.750711441040039}],"grid_spacing":1.0141853094100953,"vertical_step":3.3333323001861574,"priority":1,"preempt":false}'''

# ==== parsing ====
d1 = json.loads(s1)
d2 = json.loads(s2)

def xyz_arrays(points):
    xs = [p["x"] for p in points]
    ys = [p["y"] for p in points]
    zs = [p["z"] for p in points]
    return xs, ys, zs

x1, y1, z1 = xyz_arrays(d1["points"])
x2, y2, z2 = xyz_arrays(d2["points"])

# ==== plot ====
fig = plt.figure()
ax = fig.add_subplot(111, projection="3d")
ax.scatter(x1, y1, z1, label=f"{d1['mission_id']} (n={len(x1)})", s=18)
ax.plot(x1 + [x1[0]], y1 + [y1[0]], z1 + [z1[0]], alpha=0.6)  # close the loop visually

ax.scatter(x2, y2, z2, label=f"{d2['mission_id']} (n={len(x2)})", marker="^", s=18)
ax.plot(x2 + [x2[0]], y2 + [y2[0]], z2 + [z2[0]], alpha=0.6)

ax.set_xlabel("X (m)")
ax.set_ylabel("Y (m)")
ax.set_zlabel("Z (m)")
ax.set_title("map_area: input boundary points (Unity â†’ CDS)")
ax.legend()
plt.tight_layout()
plt.show()
